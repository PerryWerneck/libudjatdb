<?xml version="1.0" encoding="UTF-8" ?>

<config>

	<module name='civetweb' required='no' />
	<module name='information' required='no' />

	<!--
		Use attribute for database URL to avoid repetitions.
	-->
	<attribute name='database' value='sqlite3:db=/tmp/test.db;@pool_size=10' />

	<!--
	
		Run SQL script on service startup.
	
	-->
	<sql type='initializer' database='${database}' >
		create table if not exists urls (id integer primary key, inserted timestamp default CURRENT_TIMESTAMP, url text, action text, payload text)
	</sql>
	
	<!--
	
		Create URL Scheme sql:// 
		
		Example:
		
		<alert name='test' url='sql+http:///path?value=10' />
	
	-->
	<sql name='sql' type='url-scheme' database='${database}'>
		insert into urls (url,action,payload) values (${url},${action},${payload})
	</sql>

</config>

